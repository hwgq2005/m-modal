!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):e.Modal=o()}(this,function(){"use strict";function e(e,o){for(var t in o)e[t]=o[t];return e}function o(e,o){return e.className.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}function t(e,t){o(e,t)||(e.className+=" "+t)}function n(e,t){if(o(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}var c=1050,l=function(o){var t={id:"modal"+(new Date).getTime(),type:0,addClass:"",title:"提示",backdrop:!0,confirmButton:!0,cancelButton:!0,confirmText:"确定",ccancelText:"取消",complete:function(){},confirm:function(){},cancel:function(){}},o=e(t,o);this.options=o,this.confirm=o.confirm,this.cancel=o.cancel,this.complete=o.complete,this.element=document.querySelectorAll("#"+o.id),this.init(this.options,this.element)};return l.prototype.init=function(e,o){var t=this;o.length<=0&&(c++,t.show(e,o))},l.prototype.show=function(){var e=this,o=null,n=e.options;o=1==n.type?"modal-prompt":"","string"==typeof n.addClass?n.addClass=n.addClass:n.addClass="";var l="",a=document.createElement("div");a.id=n.id,a.className="modal "+n.addClass+o,a.style.zIndex=c-1,l+='<div class="modal-header">'+n.title+'<a href="javascript:;" class="modal-close modal-close-'+n.id+'" >×</a></div>',l+='<div class="modal-body">'+n.content+"</div>",l+='<div class="modal-footer modal-footer-right"><div class="btn-group">',n.confirmButton&&(l+='<a href="javascript:;" class="btn btn-primary modal-confirm-'+n.id+'" >'+n.confirmText+"</a>"),n.cancelButton&&1!=n.type&&(l+='<a href="javascript:;" class="btn modal-cancel-'+n.id+'">'+n.ccancelText+"</a>"),l+="</div></div>",a.innerHTML=l;var d=document.querySelector("body");d.appendChild(a),t(a,"in"),"function"==typeof e.complete&&e.complete(),n.backdrop?e.backdrop(n):"",e.bindEvent(n)},l.prototype.hide=function(e){var o=e||this.options.id,t=document.querySelector("body"),n=document.querySelector("#"+o);t.removeChild(n),document.querySelectorAll(".modal-backdrop-"+o).length>0?this.hideBackDrop(o):""},l.prototype.backdrop=function(e){var o=e.id,n=document.querySelector("body");if(document.querySelectorAll(".modal-backdrop-"+o).length<=0){var l=document.createElement("div");l.className="modal-backdrop modal-backdrop-"+o,l.style.zIndex=c-2,n.appendChild(l),t(n,"modal-open"),t(l,"in")}},l.prototype.hideBackDrop=function(e){var o=document.querySelector("body"),t=document.querySelector(".modal-backdrop-"+e);o.removeChild(t),document.querySelectorAll(".modal-backdrop").length<1&&n(o,"modal-open")},l.prototype.bindEvent=function(e){var o=this,t=e.id,n=document.querySelectorAll(".modal-confirm-"+t);n[0].onclick=function(){"function"==typeof o.confirm&&(o.confirm(),o.hide(t))};var c=document.querySelectorAll(".modal-cancel-"+t);c.length>0&&(c[0].onclick=function(){"function"==typeof o.cancel&&(o.cancel(),o.hide(t))});var l=document.querySelectorAll(".modal-close-"+t),a=document.querySelectorAll(".modal-backdrop-"+t);l.length>0&&(l[0].onclick=function(){o.hide(t)}),a.length>0&&(a[0].onclick=function(){o.hide(t)})},l});