!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Modal=t()}(this,function(){"use strict";function e(e,t){for(var o in t)e[o]=t[o];return e}function t(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function o(e,o){t(e,o)||(e.className+=" "+o)}function n(e,o){if(t(e,o)){var n=new RegExp("(\\s|^)"+o+"(\\s|$)");e.className=e.className.replace(n," ")}}var c=1050,l=function(t){var o={id:"modal"+(new Date).getTime(),type:0,addClass:"",title:"提示",width:500,backdrop:!0,confirmButton:!0,cancelButton:!0,confirmText:"确定",ccancelText:"取消",complete:function(){},confirm:function(){},cancel:function(){}},t=e(o,t);this.options=t,this.confirm=t.confirm,this.cancel=t.cancel,this.complete=t.complete,this.element=document.querySelectorAll("#"+t.id),this.init(this.options,this.element)};return l.prototype.init=function(e,t){var o=this;t.length<=0&&(c++,o.show(e,t))},l.prototype.show=function(){var e=this,t=null,n=e.options;t=1==n.type?"modal-tip":"","string"==typeof n.addClass?n.addClass=n.addClass:n.addClass="";var l="",i=document.createElement("div");i.id=n.id,i.className="modal "+n.addClass+t,i.style.width=n.width+"px",i.style.marginLeft=-(n.width/2)+"px",i.style.zIndex=c-1,0!=n.type&&2!=n.type||3==n.type||(l+='<div class="modal-header">'+n.title+'<a href="javascript:;" class="modal-close modal-close-'+n.id+'" >×</a></div>'),l+='<div class="modal-body">'+n.content+"</div>",2!=n.type&&3!=n.type&&(l+='<div class="modal-footer modal-footer-right"><div class="btn-group">',n.confirmButton&&(l+='<a href="javascript:;" class="btn btn-primary modal-confirm-'+n.id+'" >'+n.confirmText+"</a>"),n.cancelButton&&(l+='<a href="javascript:;" class="btn modal-cancel-'+n.id+'">'+n.ccancelText+"</a>"),l+="</div></div>"),i.innerHTML=l;var a=document.querySelector("body");a.appendChild(i),o(i,"in"),"function"==typeof e.complete&&e.complete(),n.backdrop?e.backdrop(n):"",e.bindEvent(n)},l.prototype.hide=function(e){var t=e||this.options.id,o=document.querySelector("body"),n=document.querySelector("#"+t);o.removeChild(n),document.querySelectorAll(".modal-backdrop-"+t).length>0?this.hideBackDrop(t):""},l.prototype.backdrop=function(e){var t=e.id,n=document.querySelector("body");if(document.querySelectorAll(".modal-backdrop-"+t).length<=0){var l=document.createElement("div");l.className="modal-backdrop modal-backdrop-"+t,l.style.zIndex=c-2,n.appendChild(l),o(n,"modal-open"),o(l,"in")}},l.prototype.hideBackDrop=function(e){var t=document.querySelector("body"),o=document.querySelector(".modal-backdrop-"+e);t.removeChild(o),document.querySelectorAll(".modal-backdrop").length<1&&n(t,"modal-open")},l.prototype.bindEvent=function(e){var t=this,o=e.id,n=document.querySelectorAll(".modal-confirm-"+o);n[0].onclick=function(){"function"==typeof t.confirm&&t.confirm()};var c=document.querySelectorAll(".modal-cancel-"+o);c.length>0&&(c[0].onclick=function(){"function"==typeof t.cancel&&(t.cancel(),t.hide(o))});var l=document.querySelectorAll(".modal-close-"+o),i=document.querySelectorAll(".modal-backdrop-"+o);l.length>0&&(l[0].onclick=function(){t.hide(o)}),i.length>0&&(i[0].onclick=function(){t.hide(o)})},l});